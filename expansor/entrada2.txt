READ M2
READ M3

MDC:
	LOAD RB M3
	LOAD RC M4
	COMP RB RC ; IF B == 0
	BEZ FIM
	DIVISAO
L100:
	LOAD RB M3
	STORE M2 RB ; A = B
	LOAD RC M1
	STORE M3 RC ; B = RESTO(A,B)
	JMP MDC

FIM:
	WRITE M2
	HALT
	
DIVISAO: BEGINMACRO
LOAD RA M2 ; DIVIDENDO
	LOAD RB M3 ; DIVISOR
	LOAD RC M4 ; AUX 0
	COMP RB RC
	BEZ L3 ;DIVISOR == 0
	BLZ L5
L6:
	COMP RA RC
	BEZ L4 ; RA == 0
	BLZ L7
L1:
	COMP RA RB
	BLZ L2 ; RA < RB ?
	SUB RA RB
	LOAD RC M5
	LOAD RD M0
	ADD RD RC ; QUOCIENTE ++
	STORE M0 RD
	JMP L1
L2:
	STORE M1 RA ; SALVA RESTO
	JMP L3
L4: 
	STORE M1 RB
L3:
	LOAD RC M6
	LOAD RD M7
	LOAD RA M5
	COMP RC RA
	BNZ L15
	BEZ L16
L15:
	COMP RD RA
	BEZ L8
	JMP L9
L16:
	COMP RD RA
	BNZ L8
L9:
	LOAD RC M6
	LOAD RA M5
	COMP RC RA
	BEZ L10
L11:
	JMP L100
L5:
	LOAD RD M5
	STORE M7 RD
	NEG RB
	JMP L6
L7:
	LOAD RD M5
	STORE M6 RD
	NEG RA
	JMP L1
L8:
	LOAD RA M0
	NEG RA
	STORE M0 RA
	JMP L9
L10:
	LOAD RB M1
	NEG RB
	STORE M1 RB
	JMP L11
ENDMACRO

M0: WORD 0 ; QUOCIENTE
M1: WORD 0 ; RESTO
M2: WORD 0 ; DIVIDENDO
M3: WORD 0 ; DIVISOR
M4: WORD 0 ; AUX 0
M5: WORD 1 ; AUX 1
M6: WORD 0 ; SINAL DIVIDENDO
M7: WORD 0 ; SINAL DIVISOR
	END
